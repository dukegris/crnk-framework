apply plugin: 'war'
apply plugin: 'liberty'

repositories {
    mavenCentral()
}

// configure liberty-gradle-plugin
buildscript {
    repositories {
        mavenCentral()
	    maven {
	    	url 'https://repo1.maven.org/maven2/'
	    }
    }
    dependencies {
        classpath 'io.openliberty.tools:liberty-gradle-plugin:3.2'
    }
}

dependencies {

    compileOnly project(':crnk-core')
    compileOnly project(':crnk-data:crnk-data-jpa')
    compileOnly project(':crnk-home')
    compileOnly project(':crnk-setup:crnk-setup-rs')

    compileOnly 'jakarta.platform:jakarta.jakartaee-api:10.0.0'
    compileOnly 'jakarta.inject:jakarta.inject-api:2.0.1'
    compileOnly 'jakarta.persistence:jakarta.persistence-api:3.1.0'
    compileOnly 'jakarta.ws.rs:jakarta.ws.rs-api:3.1.0'
    compileOnly 'org.eclipse.microprofile:microprofile:4.0.1'

}

ext  {
    liberty.server.var.'default.http.port' = '9080'
    liberty.server.var.'default.https.port' = '9443'
    liberty.server.var.'app.context.root' = project.name
}

liberty {
    server {
        name = 'myServer'
        packageLiberty {
            packageName = "MyPackage"
            include = "runnable"
        }
    }
}